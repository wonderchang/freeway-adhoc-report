<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Freeway Ad-Hoc</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="page" style="height: 4000px;">

      <header class="text-center">
	<h1>高速公路車載網路之<br />封包傳遞效能成本模擬分析</h1>
	<h3>EE103A E24990019 張遠哲</h3>
	<h3>指導老師：蘇淑茵</h3>
      </header>

      <section>
	<h2>報告摘要</h2>
	<div id="freeway"></div>
	<p class="layer1">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  車載網路是以移動中的車輛及交通設施作為節點, 透過Ad-Hoc的網路架構，形成一個行動通訊網路，
	  加入網路的車輛，會成為一個無線節點，或是無線路由，並允許在特定的距離內的其他汽車彼此連結，在交通路線上形成一個大範圍的網路。
	  這樣的網路系統，可以被廣泛使用在事故路況的即時回報，並讓後方的車輛能提早了解前方事故並做應變措施。
	  而本報告為模擬在高速公路中，行駛車輛之間所形成的網路，在不同的距離、訊號收發次數、甚至是外在環境干擾的影響之下，
	  通訊封包再傳遞的效能與成本之間的比率變化。
	</p>
      </section>

      <section>
	<h2>封包的傳遞效能與接收成本</h2>
	<p class="layer1">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  封包在車載網路中傳遞，因為整個網路的結構一直不斷的在變化，封包是否可以正確的傳出去到讓每個節點都收到，是一個重要的課題，
	  因此對於整個網路所有節點，有多少個節點收到同一個封包訊息，這個比例也就是車載網路封包傳輸的效能比率。
	  另外，封包在傳遞路徑上可能受到各種因素的限制與干擾，造成傳遞失敗，通常會利用重送的方法來做補救的機制，
	  但是每一次傳遞的動作都將耗費不小的成本，因此每個結點所收到封包的成本，便是有多少其他的節點傳給該節點封包的總次數，
	  也就是說該節點能取得封包，全是因為其他能傳給他的節點不斷的與其溝通的結果，因此這樣取得的代價，便是其封包接收的成本。
	</p>
      </section>

      <section>
	<h2>影響封包傳遞之控制變因</h2>
	<h3 class="layer1">1. 可傳送距離</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  訊號能傳送的距離往往是最基本的限制條件，在車載網路之中，每台行使中的車輛都是一個訊號傳送端，即所謂的AP, 他會已廣播的方式將封包傳送給與他鄰近的車輛節點，
	  而這個可接收其封包的距離就是這個發送端AP所能傳送的距離。舉例來說，假設傳送端節點可傳送的距離為可傳送的距離為100公尺，則在該節點方圓100公尺範圍內的其他節點，
	  理論上皆能收到傳送端節點所廣播的封包。
	</p>
	<h3 class="layer1">2. 重傳次數</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  傳送端發送封包，當接收端收到後會回傳ACK告知傳送端已確實收到，而若傳送端時時沒有收到接收端的ACK訊息，則會在執行重送。
	  而在車載網路中使用Flooding的方式，接收端亦是傳送端，接收端所收到的每一個封包，皆會傳給所有在範圍內的所有節點，如此一來，發送端可能針對同一個訊息內容傳送給鄰近的節點不只一次，
	  重傳的次數越高，每個節點所能正確接收到訊息的機率越大，但同個訊息已在接收端收到而發送端仍持續傳送，就會形成資源的浪費。理論上希望重傳可以無限次數，但實際上我們需要規範每個節點所可以重傳的最多次數，
	  來避免成本的浪費。
	</p>
	<h3 class="layer1">3. 傳送成功率</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  傳送端在發送封包的時候，也可能受到各種因素的影響而無法成功的發送出去，實際情況也是如此，不太可能預期每一次的傳送封包行為都是有效的，總會有失誤的時候，
	  這樣的因素也將造成封包是否能順利的傳送出去，因此也考慮進模擬系統，以機率的方式來影響模擬結果。
	</p>
	<h3 class="layer1">4. 接收成功率</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  封包透過傳送端以電磁波的方式傳給接收端，而在以電磁波傳遞的過程當中，可能受到雜訊的干擾或是其他不可預期的外在環境因素等影響，封包可能無法成功的在接收端成功接收，
	  這樣的因素也將造成封包是否能順利的傳送出去，因此也考量進模擬系統，以機率的方式來影響模擬結果。
	</p>
      </section>

      <section>
	<h2>簡化問題</h2>
	<h3 class="layer1">1. 一維空間</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  高速公路通常有好幾線道，在分析彼此車輛的距離應為二維的空間較為合理，但為了簡化問題，以一維空間來計算，所有的車輛節點接在通一條直線上，
	  如此與二維的空間分佈來說並不會有太大的差異，因為所針對的是一個距離的量值。
	</p>
	<h3 class="layer1">2. 固定所有節點</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  在高速公路中，因為有規範車速限制，行使車輛之間的速度變化不大，為簡化問題，可以假設彼此之間的相對距離為固定，將所有行使車輛之車速視為皆等速度行進。
	</p>
	<h3 class="layer1">3. 距離決定接收順序</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  當進行Flooding傳送封包的方法中，同一個封包之訊息內容可能由多個節點而來，因此所接收到的時候理應有先後順序，而為了簡化問題，
	  設定由距離來決定取得封包的優先順序，也就是說，當兩個傳送端一個距離接收端較近，另一個較遠，則會先收到近端的封包，接著才會收到遠端的封包。
	</p>
	<h3 class="layer1">4. 只往後傳</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  原來Flooding的傳送方法為只要收到就傳給周遭所有可以傳到的節點，因此以高速公路的車輛為例，
	  後方的車輛仍可能向前傳遞，為了簡化問題，我們設定封包的傳遞只能往後傳。
	</p>
      </section>

      <section>
	<h2>模擬程式說明</h2>
	<h3 class="layer1">1. 資料定義</h3>
	<h3 class="layer2">
	  <div class="code_region">
	    <code>
	      CAR_NUM = 100;
	    </code>
	  </div>
	</h3>
	<p class="layer3">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  整條高速公路有多少輛汽車, 以上述程式碼為例有100輛車在高速公路上。
	</p>
	<h3 class="layer2">
	  <div class="code_region">
	    <code>
	      car = {<br /> 
	      <span class="tab">"id": 3,</span><br />
	      <span class="tab">"x": 144.78,</span><br /> 
	      <span class="tab">"counter": 2,</span><br />
	      <span class="tab">"received: 1,</span><br />
	      <span class="tab">"packet_num": 2,</span><br />
	      <span class="tab">"reachable": [4, 5, 6, 7]</span><br /> 
	      }
	    </code>
	  </div>
	</h3>
	<p class="layer3">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  將每部車以物件形態顯示其資料，每輛車有三個屬性，
	  「id」是車的編號標示每輛車;
	  「x」是其座落的位置，單位為公尺;
	  「counter」表示該車輛已傳送過幾次封包;
	  「received」表是否曾收到過封包，1代表有，0代表無;
	  「packet_num」表示該車輛已收到幾個封包;
	  「recahable」是可傳送距離之車輛節點之列表，以陣列形式記錄。
	  以上程式碼為例，該車的編號為3，其坐落在距離模擬之起始位置的144.78公尺處，
	  供廣播了兩次封包給其他節點，
	  當然能傳給其他人代表曾收到過該封包過，
	  而其收到的封包數目為2個，
	  而其在假設某一可重送距離之下，能與車號為4、5、6、7傳送封包進行溝通。
	</p>
	<h3 class="layer2">
	  <div class="code_region">
	    <code>
	      freeway = [car_1, car_2, car_3, ... ..., car_n];
	    </code>
	  </div>
	</h3>
	<p class="layer3">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	  整條高速公路長1公里，起始點為0，終點為1000公尺，並以陣列資料形態顯示，
	  裡頭的資料便是每輛車，這些車再整條高速公路的位置隨編號照順序排列，
	  編號小的坐落位置在編好大的前面。
	</p>
	<h3 class="layer1">2. 邏輯與流程</h3>
	<p class="layer2">
	  &nbsp;&nbsp;&nbsp;&nbsp;
	</p>
      </section>


    </div>
    <script src="http://d3js.org/d3.v3.js"></script>
    <script src="./dynamic-car-flow/app.js"></script>
  </body>
</html>
